# Redis Strings
Redis 문자열에 대한 소개

Redis 문자열은 텍스트, 직렬화된 객체, 바이너리 배열 배열등을 포함하는 바이트 시퀸스를
저장합니다. 이와 같이 문자열은 Redis 키에 사용할 수 있는 가장 기본적인 형태의 
값입니다. 문자열은 주로 캐싱에 이용되지만, 사용자들이 카운터를 구현하거나, 
비트 연산을 수행할 수 있게 해주는 추가적인 기능들도 지원해줍니다.
<br><br>
Redis 키는 문자열이고, 밸류도 문자열 타입을 사용하기 때문에, 우리는 문자열에 
문자열을 매핑하게 된다. 문자열 타입은 HTML 조각이나 페이지 전체를 캐싱하는 등 
다양한 상황에서 유용합니다.
```redis
SET bike:1 Deimos
OK
GET bike:1
"Deimos"
```
보시다시피 SET 명령어와 GET 명령어를 통해 문자열 값을 설정하고 조회할 수 있습니다.
SET 명령은 이미 키에 값이 저장되어 있어도, 비록 키에 문자열이 아닌 값이 할당되어 있어도,
기존의 값을 대체하고 할당하게 됩니다. 즉 SET 명령어는 값을 할당하는 작업입니다.
<br><br>
값은 문자열이라면 (바이너리 데이터를 포함해서) 어떤 형태든 가능하며, 예시로 JPEG
이미지도 값으로 저장할 수 있습니다. 값의 크기는 512 MB를 넘을 수 없습니다.
<br><br>
SET 명령은 추가적인 인자로 제공되는 여러 흥미로운 옵션들을 가집니다. 예를 들어,
키가 이미 존재하면 SET이 실패하거나, 반대로 키가 존재해야지만 성공할 수 있게 설정
할 수 있습니다.
```redis
SET bike:1 bike nx
(nil)
SET bike:1 bike xx
OK
```
문자열을 조작하는 다양한 명령어들은 많습니다. 예시로, GETSET 명령어는 키를 새로운
값에 할당하고, 기존의 값을 반환합니다. 이 명령어는 새로운 방문자를 받을때마다 INCR을
사용해서 Redis 키를 증가시키는 시스템같은 상황에서 사용할 수 있습니다. 이러한 정보를
매 시간 마다 단 한 개의 데이터도 놓치지 않고 수집하고 싶을 수 도 있습니다. 그럴때는
GETSET 명령어를 통해 키를 0에 할당하고 기존의 값을 받환받을 수 있습니다.
<br><br>
단 한번의 명령어로 다수의 키를 설정하고, 조회하는 것은 지연 시간을 줄이는 데도 유용합니다.
이러한 이유들로 MSET과 MGET 명령어를 지원합니다:
```redis
mset bike:1 "Deimos" bike:2 "Ares" bike:3 "Vanth"
OK
mget bike:1 bike:2 bike:3
1) "Deimos"
2) "Ares"
3) "Vanth"
```
### 카운터로서의 문자열
비록 문자열이 Redis의 기본 값이지만, 문자열을 가지고 수행할 수 있는 다양한 연산들이
있습니다. 그 예시로 원자적 증가가 있습니다 : 
```redis
set total_crashes 0
OK
incr total_crashes
(integer) 1
incrby total_crashes 10
(integer) 11
```
INCR 명령어는 문자열 값을 정수로 해석하여 하나 씩 증가시켜주고 증가된 값을 새로운
값으로 설정합니다. INCRBY, DECR, 그리고 DECRBY같은 비슷한 명령어들도 존재합니다.
살짝 다르게 동작하지만, 내부적으로는 항상 같은 명령어로 동작합니다. 
<br><br>
INCR이 원자적이라는 것은 무슨 뜻일까요? 다수의 곳에서 INCR을 이용해 같은 키를 증가시켜도
경쟁 상태에 절대로 들어가지 않는다는 것을 의미합니다. 예시로, 클라이언트 1이 "10"을
조회하고, 클라이언트 2가 "10"을 동시에 조회했을때, 각각 11로 증가시키고 값을 설정시키는
일이 절대로 일어나지 않는다는 뜻입니다. 최종적인 값은 항상 12가 될 것이며, 조회-증가-설정
작업은 다른 클라이언트들이 동시에 명령을 실행하지 않는 동안 수행된다.

## Limits
***
단일 레디스 문자열을 기본적으로 512MB까지 지원한다. 

## Basic commands
***

### Getting and setting Strings
- SET은 문자열 값을 저장합니다.
- SETNX는 키가 존재하지 않는 경우에만 문자열 값을 저장합니다. 락을 구현하는데에 있어 유용합니다.
- GET은 문자열 값을 조회합니다.
- MGET은 한 번의 동작으로 여러 개의 문자열 값들을 조회합니다.

### Managing counters
- INCR은 주어진 키에 저장된 카운터를 원자적으로 1씩 증가시킵니다.
- INCRBY는 주어진 키에 저장된 카운터를 원자적으로 증가시킨다.(음수가 주어지면 감소시킨다.)
- INCRBYFLOAT를 통해 소숫점 포인트 카운터를 조작할 수 있다.

### Bitwise operations
문자열에서 비트 연산을 수행하기 위해서는 bitmaps 자료형 부분을 보세요.
모든 문자열 명령어 목록을 보시면 됩니다.

## Performance
***
대부분의 문자열 명령어들은 O(1)으로 이루어지며, 이것은 매우 효율적이라는 의미이다.
하지만, SUBSTR, GETRANGE, SETRANGE 명령어는 O(n)으로 이루어질 수 있으며, 
이러한 임의 접근 문자열들은 큰 문자열을 다룰 때 성능 문제를 일으킬 수 있다.

## Alternatives
***
만약 사용자가 직렬화된 문자열로 구조화된 데이터를 저장하면, Redis 해시나 
JSON을 고려해볼 수 있다.

## Learn more
***
- Redis Strings Explained는 Redis 문자열에 대한 짧고, 종합적인 비디오 강의다.
- Redis University's RU101에서 Redis 문자열에 대해 자세히 볼 수 있습니다.